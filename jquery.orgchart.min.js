(function(a){function n(d,e,h,b){var p=a("<table cellpadding='0' cellspacing='0' border='0'/>"),j=a("<tbody/>"),m=a("<tr/>").addClass("nodes"),g=a("<td/>").addClass("node").attr("colspan",2),c=d.children("ul:first").children("li");1<c.length&&g.attr("colspan",2*c.length);var k=a("<h2>").html(b.nodeText(d));$nodeDiv=a("<div>").addClass("node").addClass("level"+h).data("orgchart-level",h).data("orgchart-node",d).append(k);$nodeDiv.addClass(d.attr("class"));g.append($nodeDiv);m.append(g);j.append(m);
$nodeDiv.click(function(){var f=a(this);b.nodeClicked(f.data("orgchart-node"));b.interactive&&(f=f.closest("tr"),f.next("tr").is(":visible")?b.fade?f.nextAll("tr").fadeOut(b.speed):f.nextAll("tr").hide():b.fade?f.nextAll("tr").fadeIn(b.speed):f.nextAll("tr").show())});if(0<c.length){if(-1==b.depth||h+1<b.depth){d=a("<tr/>").addClass("lines");g=a("<td/>").attr("colspan",2*c.length);d.append(g);k=a("<table cellpadding='0' cellspacing='0' border='0'>");k.append("<tbody>");var q=a("<tr/>").addClass("lines x"),
s=a("<td>").addClass("line left"),t=a("<td>").addClass("line right");q.append(s).append(t);k.children("tbody").append(q);g.append(k);j.append(d);0<c.length&&($nodeDiv.addClass("hasChildren"),b.interactive&&$nodeDiv.hover(function(){a(this).addClass(b.hoverClass)},function(){a(this).removeClass(b.hoverClass)}));var l=a("<tr/>").addClass("lines v");c.each(function(){var b=a("<td/>").addClass("line left top"),c=a("<td/>").addClass("line right top");l.append(b).append(c)});l.find("td:first").removeClass("top");
l.find("td:last").removeClass("top");j.append(l);var r=a("<tr/>");c.each(function(){var c=a("<td/>");c.attr("colspan",2);n(a(this),c,h+1,b);r.append(c)})}else b.stack&&(c=c.clone(),c=a("<ul class='stack'>").append(c),$nodeDiv.after(c));j.append(r)}-1<b.showLevels&&h>=b.showLevels-1&&m.nextAll("tr").hide();p.append(j);e.append(p)}a.fn.orgChart=function(d){var e=a.extend({},a.fn.orgChart.defaults,d);return this.each(function(){$this=a(this).clone();-1<e.levels&&$this.find("ul").andSelf().filter(function(){return a(this).parents("ul").length+
1>e.levels}).remove();var d=a("<div class='"+e.chartClass+"'/>");e.interactive&&d.addClass("interactive");$this.is("ul")&&n($this.find("li:first"),d,0,e);d.find("div.node a").click(function(a){a.stopImmediatePropagation()});e.container.append(d)})};a.fn.orgChart.defaults={container:a("body"),depth:-1,levels:-1,showLevels:-1,stack:!1,chartClass:"orgChart",hoverClass:"hover",nodeText:function(a){return a.clone().children("ul,li").remove().end().html()},interactive:!1,fade:!1,speed:"slow",nodeClicked:function(){}}})(jQuery);
